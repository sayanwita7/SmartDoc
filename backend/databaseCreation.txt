CREATE DATABASE SmartDoc;
USE SmartDoc;


CREATE TABLE loginInfo (
    EntityID INT AUTO_INCREMENT PRIMARY KEY,
    Name VARCHAR (255),
    Email VARCHAR (255),
    Username VARCHAR (255),
    Password VARCHAR (255),
    Phone VARCHAR(15)
);
CREATE TABLE Patients (
    PatientID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    FirstName VARCHAR(255),
    LastName VARCHAR(255),
    DateOfBirth DATE,
    Gender INT,
    Phone VARCHAR(15),
    Location VARCHAR(255)
);
CREATE TABLE Doctors(
    DoctorID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    FirstName VARCHAR(255),
    LastName VARCHAR(255),
    Specialisation VARCHAR (255),
    License VARCHAR(255),
    Gender INT,
    Phone VARCHAR(15),
    Location VARCHAR(255)
);
CREATE TABLE Clinics (
    ClinicID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    Name VARCHAR(255),
    Location VARCHAR(255),
    Phone VARCHAR(15)
); 

CREATE TABLE AvailableDoctors (
    ClinicID INT,
    DoctorID INT,
    FOREIGN KEY (ClinicID) REFERENCES Clinics(ClinicID),
    FOREIGN KEY (DoctorID) REFERENCES Doctors(DoctorID),
    PRIMARY KEY (ClinicID, DoctorID)
);

CREATE TABLE BookingSchedule (
    BookingID INT AUTO_INCREMENT PRIMARY KEY,
    ClinicID INT,
    DoctorID INT,
    PatientID INT,
    BookingDate DATE,
    TimeSlot TIME,
    QueueNumber INT,
    Status ENUM('Booked','Cancelled', 'Appeared','Completed') DEFAULT 'Booked',
    FOREIGN KEY (ClinicID) REFERENCES Clinics(ClinicID),
    FOREIGN KEY (DoctorID) REFERENCES Doctors(DoctorID),
    FOREIGN KEY (PatientID) REFERENCES Patients(PatientID)
);

CREATE TABLE DoctorSchedule (
    DoctorID INT PRIMARY KEY,
    ClinicID INT,
    AvailableDays VARCHAR (255),
    TimeSlot TIME,
    MaxQueue INT DEFAULT 5,
    FOREIGN KEY (ClinicID) REFERENCES Clinics(ClinicID),
    FOREIGN KEY (DoctorID) REFERENCES Doctors(DoctorID)
);